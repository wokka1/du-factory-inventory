{
    "slots":{
        "0":{"name":"slot1","type":{"events":[],"methods":[]}},
        "-1":{"name":"unit","type":{"events":[],"methods":[]}},
        "-3":{"name":"player","type":{"events":[],"methods":[]}},
        "-4":{"name":"system","type":{"events":[],"methods":[]}}
    },
    "handlers":[
        {
            "code":"-- Signal Repeater: Fire signal 10 times with 250ms pause between each\n-- Works with: Fireworks, Manual Switches, Doors, Lights, or any element with fire() or activate()\n\n_G.repeatCount = 0\n_G.maxRepeats = 10\n_G.signalDelay = 0.25  -- 250ms in seconds\n\nsystem.print(\"=\" .. string.rep(\"=\", 40))\nsystem.print(\"Signal Repeater Started\")\nsystem.print(\"Connected element: slot1\")\nsystem.print(\"Will fire \" .. _G.maxRepeats .. \" times with \" .. (_G.signalDelay * 1000) .. \"ms pause\")\nsystem.print(\"=\" .. string.rep(\"=\", 40))\n\n-- Fire first signal\nif slot1.fire then\n    system.print(\"DEBUG: Using fire() method\")\n    slot1.fire()\nelseif slot1.activate then\n    system.print(\"DEBUG: Using activate() method\")\n    slot1.activate()\nelse\n    system.print(\"ERROR: slot1 doesn't support fire() or activate()\")\n    unit.exit()\nend\n\n_G.repeatCount = 1\nsystem.print(\"[\" .. _G.repeatCount .. \"/\" .. _G.maxRepeats .. \"] FIRED\")\n\n-- Schedule next fire\nif _G.repeatCount < _G.maxRepeats then\n    system.print(\"DEBUG: Setting timer fire_next for \" .. _G.signalDelay .. \" seconds\")\n    unit.setTimer(\"fire_next\", _G.signalDelay)\n    system.print(\"DEBUG: Timer set successfully\")\nelse\n    system.print(\"All signals complete!\")\nend",
            "filter":{"args":[],"signature":"onStart()","slotKey":"-1"},
            "key":"0"
        },
        {
            "code":"-- Timer handler: fires next signal\n\nsystem.print(\"DEBUG: tick() called with timerId: \" .. tostring(timerId))\n\nif timerId == \"fire_next\" then\n    system.print(\"DEBUG: Timer matched fire_next\")\n    \n    -- Fire the signal\n    if slot1.fire then\n        slot1.fire()\n    elseif slot1.activate then\n        slot1.activate()\n    end\n    \n    _G.repeatCount = _G.repeatCount + 1\n    system.print(\"[\" .. _G.repeatCount .. \"/\" .. _G.maxRepeats .. \"] FIRED\")\n    \n    -- Schedule next fire if not done\n    if _G.repeatCount < _G.maxRepeats then\n        system.print(\"DEBUG: Scheduling next timer\")\n        unit.setTimer(\"fire_next\", _G.signalDelay)\n    else\n        system.print(\"=\" .. string.rep(\"=\", 40))\n        system.print(\"ALL SIGNALS COMPLETE!\")\n        system.print(\"=\" .. string.rep(\"=\", 40))\n    end\nelse\n    system.print(\"DEBUG: Timer ID did not match! Got: \" .. tostring(timerId))\nend",
            "filter":{"args":[{"value":"fire_next"}],"signature":"tick(timerId)","slotKey":"-1"},
            "key":"1"
        }
    ],
    "methods":[],
    "events":[]
}
